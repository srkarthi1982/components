---
export interface Props {
  id: string;
  label?: string;
  description?: string;
  class?: string;
  value?: string;
  [key: string]: any;
}

const {
  id,
  label = "",
  description,
  class: className = "",
  ...rest
} = Astro.props as Props;

if (!id) {
  throw new Error("AvCheckbox requires an id");
}

const checkboxClasses = [
  "size-5 rounded-[var(--ans-radius)] border-[var(--ans-border)] bg-[var(--ans-bg)] text-[var(--ans-primary)] shadow-sm",
  "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ans-ring)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--ans-bg)]",
  className,
]
  .filter(Boolean)
  .join(" ");
---

<label for={id} class="inline-flex items-start gap-3 text-[var(--ans-fg)]">
  <input type="checkbox" id={id} class={checkboxClasses} {...rest} />
  <span>
    {label ? <span class="font-medium">{label}</span> : <slot name="label" />}
    {description ? (
      <p class="text-sm text-[var(--ans-fg-muted)]">{description}</p>
    ) : (
      <slot name="description" />
    )}
  </span>
</label>
